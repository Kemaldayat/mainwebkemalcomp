<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kemal Computer - Solusi Servis Elektronik Anda</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #f0f2f5; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #e2e8f0; }
        ::-webkit-scrollbar-thumb { background: #008080; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #006666; }
        .page-content.hidden { display: none; }
        .service-card { transform: translateY(0); transition: transform .3s, box-shadow .3s; }
        .service-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); }
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: .8rem;
            font-weight: 600;
            color: #fff;
            text-transform: capitalize;
        }
        .status-waiting { background-color: #f59e0b; }
        .status-process { background-color: #22c55e; }
        .status-finished { background-color: #008080; }
        .status-picked-up { background-color: #ef4444; }

        /* Style untuk modal */
        #modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        #modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        #modal-close {
            float: right;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .slider-container {
            position: relative;
            overflow: hidden;
        }

        .slider-wrapper {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .slider-wrapper img {
            width: 100%;
            height: auto;
            flex-shrink: 0;
            border-radius: 1rem;
        }
    </style>
</head>
<body class="bg-gray-100">

    <header class="bg-white shadow-md py-4 sticky top-0 z-50">
        <div class="container mx-auto px-4 flex items-center justify-between">
            <div class="flex items-center space-x-3 cursor-pointer" onclick="showPage('home-page')">
                <img src="img/logo.png" alt="Logo Kemal Computer" class="w-10 h-10 rounded-lg">
                <span class="text-xl md:text-2xl font-bold text-teal-700">Kemal Computer</span>
            </div>
            <nav class="hidden md:flex space-x-6">
                <a href="#" class="text-gray-600 hover:text-teal-600 font-semibold transition" onclick="showPage('home-page')">Beranda</a>
                <a href="#" class="text-gray-600 hover:text-teal-600 font-semibold transition" onclick="showPage('reservation-page')">Reservasi Servis</a>
                <a href="#" class="text-gray-600 hover:text-teal-600 font-semibold transition" onclick="showPage('tracking-page')">Cek Status</a>
            </nav>
            <button id="mobile-menu-btn" class="md:hidden text-gray-600 text-2xl">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <div id="mobile-menu" class="hidden md:hidden bg-white shadow-lg py-4 px-6 z-40 fixed w-full top-16">
        <nav class="flex flex-col space-y-4">
            <a href="#" class="text-gray-600 hover:text-teal-600 font-semibold transition" onclick="showPage('home-page')">Beranda</a>
            <a href="#" class="text-gray-600 hover:text-teal-600 font-semibold transition" onclick="showPage('reservation-page')">Reservasi Servis</a>
            <a href="#" class="text-gray-600 hover:text-teal-600 font-semibold transition" onclick="showPage('tracking-page')">Cek Status</a>
        </nav>
    </div>

    <main class="container mx-auto mt-8 px-4 py-8 md:px-8 max-w-7xl">
        <section id="home-page" class="page-content">
            <div class="bg-white shadow-xl p-8 md:p-12 rounded-2xl flex flex-col md:flex-row items-center justify-between gap-8 mb-12">
                <div class="md:w-1/2 text-center md:text-left">
                    <h1 class="text-3xl md:text-5xl font-extrabold text-teal-700 leading-tight">
                        Solusi Cepat & <br> Andal untuk Elektronik Anda
                    </h1>
                    <p class="text-lg text-gray-600 mt-4 max-w-lg">
                        Kami adalah mitra terpercaya Anda dalam mengatasi berbagai masalah perangkat elektronik.
                    </p>
                    <a href="#" class="mt-8 inline-block bg-teal-600 text-white font-semibold py-3 px-8 rounded-lg shadow-lg hover:bg-teal-700 transition" onclick="showPage('reservation-page')">
                        Reservasi Sekarang
                    </a>
                </div>
                <div class="md:w-1/2 flex justify-center slider-container">
                    <div class="slider-wrapper" id="image-slider">
                        <img src="img/servislaptop.jpg" alt="Servis Laptop" class="rounded-xl shadow-lg">
                        <img src="img/servishp.jpg" alt="Servis HP" class="rounded-xl shadow-lg">
                        <img src="img/bg.jpg" alt="Layanan Servis" class="rounded-xl shadow-lg">
                    </div>
                </div>
                </div>

            <div class="mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-teal-700 mb-8">Layanan Kami</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="service-card bg-white p-6 rounded-xl shadow-md text-center">
                        <img src="img/servislaptop.jpg" alt="Servis Laptop & PC" class="w-20 h-auto mx-auto mb-4 rounded-full">
                        <h3 class="text-xl font-semibold mb-2">Servis Laptop & PC</h3>
                        <p class="text-gray-600">Perbaikan perangkat keras, instalasi sistem, dan pembersihan virus.</p>
                    </div>
                    <div class="service-card bg-white p-6 rounded-xl shadow-md text-center">
                        <img src="img/servishp.jpg" alt="Servis HP & Tablet" class="w-20 h-auto mx-auto mb-4 rounded-full">
                        <h3 class="text-xl font-semibold mb-2">Servis HP & Tablet</h3>
                        <p class="text-gray-600">Penggantian layar, baterai, dan perbaikan komponen internal.</p>
                    </div>
                    <div class="service-card bg-white p-6 rounded-xl shadow-md text-center">
                        <img src="img/bg.jpg" alt="Servis Periferal" class="w-20 h-auto mx-auto mb-4 rounded-full">
                        <h3 class="text-xl font-semibold mb-2">Servis Periferal</h3>
                        <p class="text-gray-600">Perbaikan printer, keyboard, mouse, dan perangkat lainnya.</p>
                    </div>
                </div>
            </div>

            <div class="bg-teal-700 text-white p-8 md:p-12 rounded-2xl shadow-xl">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-8">Testimoni Pelanggan</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white text-gray-800 p-6 rounded-lg shadow-md">
                        <p class="italic mb-4">"Pelayanan sangat cepat dan ramah! Laptop saya kembali normal dalam sehari."</p>
                        <p class="font-semibold text-right">- Budi S.</p>
                    </div>
                    <div class="bg-white text-gray-800 p-6 rounded-lg shadow-md">
                        <p class="italic mb-4">"Kerusakan HP saya bisa diperbaiki dengan biaya yang sangat terjangkau. Recommended!"</p>
                        <p class="font-semibold text-right">- Sita A.</p>
                    </div>
                </div>
            </div>

            <section class="bg-white p-8 md:p-12 rounded-2xl shadow-xl w-full max-w-2xl mx-auto text-center mt-8">
                <h2 class="text-3xl md:text-4xl font-bold text-teal-700 mb-4">Lokasi Kami</h2>
                <p class="text-center text-gray-600 mb-8">Gg. Serai No.127B, Tempel, Caturtunggal, Kec. Depok, Kabupaten Sleman, Daerah Istimewa Yogyakarta 55281, Indonesia</p>
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3953.181816556106!2d110.4072615!3d-7.7719623!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e7a59a722650059%3A0xc3f92502c608034b!2sKemal%20Computer!5e0!3m2!1sen!2sid!4v1692257217009!5m2!1sen!2sid"
                    width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" class="rounded-lg shadow-md">
                </iframe>
            </section>
        </section>

        <section id="reservation-page" class="page-content hidden">
            <div class="bg-white p-8 md:p-12 rounded-2xl shadow-xl w-full max-w-2xl mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-teal-700 mb-4 text-center">Reservasi Servis</h2>
                <p class="text-center text-gray-600 mb-8">Isi formulir di bawah ini untuk mereservasi layanan servis.</p>
                <form id="reservationForm" class="space-y-6">
                    <div>
                        <label for="nama" class="block text-sm font-medium mb-1">Nama Lengkap</label>
                        <input type="text" id="nama" required class="w-full px-4 py-3 border rounded-lg">
                    </div>
                    <div>
                        <label for="device" class="block text-sm font-medium mb-1">Jenis Device</label>
                        <input type="text" id="device" required class="w-full px-4 py-3 border rounded-lg">
                    </div>
                    <div>
                        <label for="kerusakan" class="block text-sm font-medium mb-1">Deskripsi Kerusakan</label>
                        <textarea id="kerusakan" rows="4" required class="w-full px-4 py-3 border rounded-lg"></textarea>
                    </div>
                    <div>
                        <label for="nomorHp" class="block text-sm font-medium mb-1">Nomor HP (Contoh: 62812...)</label>
                        <input type="tel" id="nomorHp" required class="w-full px-4 py-3 border rounded-lg">
                    </div>
                    <button type="submit" class="w-full bg-teal-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg hover:bg-teal-700 transition">
                        <i class="fas fa-calendar-alt mr-2"></i> Buat Reservasi
                    </button>
                </form>
            </div>
        </section>

        <section id="tracking-page" class="page-content hidden">
            <div class="bg-white p-8 md:p-12 rounded-2xl shadow-xl w-full max-w-2xl mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-teal-700 mb-4 text-center">Cek Status Layanan Anda</h2>
                <p class="text-center text-gray-600 mb-8">Masukkan kode service untuk melihat status perbaikan perangkat Anda.</p>
                <form id="checkStatusForm" class="space-y-6">
                    <div>
                        <label for="serviceCode" class="block text-sm font-medium mb-1">Kode Service</label>
                        <input type="text" id="serviceCode" placeholder="Contoh: KC-YYMMDD-HHMMSS-RANDOM" required class="w-full px-4 py-3 border rounded-lg">
                    </div>
                    <button type="submit" class="w-full bg-teal-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg hover:bg-teal-700 transition">
                        <i class="fas fa-search mr-2"></i> Cek Status
                    </button>
                </form>
                <div id="resultContainer" class="mt-8 bg-gray-50 p-6 rounded-lg hidden">
                    <div id="trackingContent" class="space-y-2">
                        </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-teal-700 text-white py-10 mt-12">
        <div class="container mx-auto px-4 md:px-8 max-w-7xl">
            <div class="flex flex-col md:flex-row justify-between items-center md:items-start gap-8 border-b border-teal-600 pb-8 mb-8">
                <div class="text-center md:text-left">
                    <div class="flex items-center justify-center md:justify-start gap-3 mb-4">
                        <img src="img/logo.png" alt="Logo Kemal Computer" class="w-12 h-12 rounded-lg">
                        <span class="text-2xl font-bold">Kemal Computer</span>
                    </div>
                    <p class="text-sm text-gray-300 max-w-sm">
                        Kami adalah mitra terpercaya Anda dalam mengatasi berbagai masalah perangkat elektronik dengan cepat dan andal.
                    </p>
                </div>
                <div class="text-center md:text-left">
                    <h3 class="text-xl font-semibold mb-4">Kontak Kami</h3>
                    <p class="text-sm text-gray-300">Gg. Serai No.127B, Tempel, Caturtunggal,<br> Kec. Depok, Sleman, DIY 55281</p>
                    <p class="text-sm text-gray-300 mt-2">Telp: <a href="tel:+628123456789" class="hover:underline">+62 812-3456-789</a></p>
                </div>
                <div class="text-center md:text-left">
                    <h3 class="text-xl font-semibold mb-4">Ikuti Kami</h3>
                    <div class="flex justify-center md:justify-start space-x-4 text-2xl">
                        <a href="https://www.instagram.com/kemal_computer" target="_blank" class="hover:text-gray-300 transition"><i class="fab fa-instagram"></i></a>
                        <a href="https://www.youtube.com/channel/kemal_computer" target="_blank" class="hover:text-gray-300 transition"><i class="fab fa-youtube"></i></a>
                        <a href="https://www.tiktok.com/@kemal_computer" target="_blank" class="hover:text-gray-300 transition"><i class="fab fa-tiktok"></i></a>
                        <a href="https://wa.me/628123456789?text=Halo%2C%20saya%20ingin%20bertanya%20tentang%20layanan%20servis." target="_blank" class="hover:text-gray-300 transition"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
            <div class="text-center text-gray-300 text-sm">
                <p>Â© 2024 Kemal Computer. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script type="module">
        // Firebase Configuration (Ganti dengan konfigurasi Anda yang sebenarnya)
        const firebaseConfig = {
            apiKey: "AIzaSyDRvkYXHUb42q2H8F_2687CTihtDDNuYQ4",
            authDomain: "website-track-service.firebaseapp.com",
            databaseURL: "https://website-track-service-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "website-track-service",
            storageBucket: "website-track-service.firebasestorage.app",
            messagingSenderId: "87573564376",
            appId: "1:87573564376:web:c93c07f0506d00535a00ad",
            measurementId: "G-64T8XNWK5F"
        };

        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getDatabase, ref, get, set, child } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Elemen Halaman
        const pages = document.querySelectorAll('.page-content');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        // Elemen Formulir & Hasil
        const reservationForm = document.getElementById('reservationForm');
        const checkStatusForm = document.getElementById('checkStatusForm');
        const serviceCodeInput = document.getElementById('serviceCode');
        const resultContainer = document.getElementById('resultContainer');
        const trackingContent = document.getElementById('trackingContent');
        
        // Elemen Slider
        const slider = document.getElementById('image-slider');
        const slides = slider ? slider.querySelectorAll('img') : [];
        let currentSlide = 0;
        let slideInterval;
        const intervalTime = 5000; // Waktu dalam ms untuk slide otomatis

        // Fungsi Tampilkan Halaman
        window.showPage = (pageId) => {
            pages.forEach(page => {
                page.classList.add('hidden');
            });
            document.getElementById(pageId).classList.remove('hidden');
            mobileMenu.classList.add('hidden'); // Tutup menu mobile
            document.documentElement.scrollTop = 0; // Gulir ke atas halaman
        };

        // Fungsi untuk menggeser slider
        function startSlider() {
            slideInterval = setInterval(() => {
                currentSlide = (currentSlide + 1) % slides.length;
                updateSlider();
            }, intervalTime);
        }

        function stopSlider() {
            clearInterval(slideInterval);
        }
        
        function updateSlider() {
            const offset = -currentSlide * 100;
            slider.style.transform = `translateX(${offset}%)`;
        }
        
        // Fungsi untuk reservasi layanan
        if (reservationForm) {
            reservationForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const nama = document.getElementById('nama').value.trim();
                const device = document.getElementById('device').value.trim();
                const kerusakan = document.getElementById('kerusakan').value.trim();
                const nomorHp = document.getElementById('nomorHp').value.trim();

                if (!nama || !device || !kerusakan || !nomorHp) {
                    alert('Semua kolom harus diisi.');
                    return;
                }

                // Format nomor HP
                if (!nomorHp.startsWith('62')) {
                    alert('Nomor HP harus dimulai dengan 62 (contoh: 62812...).');
                    return;
                }

                const d = new Date();
                const randomString = Math.random().toString(36).substring(2, 6).toUpperCase();
                const serviceCode = `KC-${d.getFullYear().toString().slice(-2)}${String(d.getMonth() + 1).padStart(2, '0')}${String(d.getDate()).padStart(2, '0')}-${d.getHours()}${d.getMinutes()}${d.getSeconds()}-${randomString}`;
                
                try {
                    await set(ref(db, `antrian/${serviceCode}`), {
                        nama,
                        device,
                        kerusakan,
                        nomorHp,
                        status: 'Menunggu',
                        timestamp: new Date().toISOString()
                    });
                    
                    alert(`Reservasi berhasil! Kode servis Anda adalah: ${serviceCode}`);
                    reservationForm.reset();
                    showPage('tracking-page');
                    serviceCodeInput.value = serviceCode;
                    trackService();

                } catch (error) {
                    console.error("Error menambahkan layanan baru:", error);
                    alert("Gagal menambahkan layanan baru. Silakan coba lagi.");
                }
            });
        }
        
        // Fungsi untuk melacak status
        async function trackService(codeToTrack = null) {
            const code = (codeToTrack || serviceCodeInput.value).trim().toUpperCase();
            
            resultContainer.classList.add('hidden');
            trackingContent.innerHTML = `<p class="text-center text-gray-400">Mencari...</p>`;
            
            if (!code) {
                trackingContent.innerHTML = `<p class="text-center text-red-500 font-bold">Mohon masukkan kode service.</p>`;
                resultContainer.classList.remove('hidden');
                return;
            }

            try {
                const dbRef = ref(db);
                const snapshot = await get(child(dbRef, `antrian/${code}`));

                if (snapshot.exists()) {
                    const service = snapshot.val();
                    let statusBadgeClass = '';
                    switch (service.status) {
                        case 'Menunggu': statusBadgeClass = 'status-waiting'; break;
                        case 'Proses': statusBadgeClass = 'status-process'; break;
                        case 'Selesai': statusBadgeClass = 'status-finished'; break;
                        case 'Diambil': statusBadgeClass = 'status-picked-up'; break;
                        default: statusBadgeClass = 'bg-gray-400';
                    }
                    
                    trackingContent.innerHTML = `
                        <p><strong class="font-semibold text-teal-700">Kode Service:</strong> ${code}</p>
                        <p><strong class="font-semibold text-teal-700">Nama Pelanggan:</strong> ${service.nama}</p>
                        <p><strong class="font-semibold text-teal-700">Jenis Device:</strong> ${service.device || '-'}</p>
                        <p><strong class="font-semibold text-teal-700">Deskripsi Kerusakan:</strong> ${service.kerusakan}</p>
                        <p><strong class="font-semibold text-teal-700">Nomor HP:</strong> ${service.nomorHp || '-'}</p>
                        <p class="mt-4"><strong class="font-semibold text-teal-700">Status:</strong> <span class="status-badge ${statusBadgeClass}">${service.status}</span></p>
                        ${service.keterangan ? `<p class="mt-4"><strong class="font-semibold text-teal-700">Keterangan:</strong> ${service.keterangan}</p>` : ''}
                    `;
                } else {
                    trackingContent.innerHTML = `<p class="text-center text-red-500 font-bold">Kode service tidak ditemukan. Mohon periksa kembali.</p>`;
                }
            } catch (error) {
                console.error("Error checking service status:", error);
                trackingContent.innerHTML = `<p class="text-center text-red-500 font-bold">Terjadi kesalahan saat mencari status. Silakan coba lagi.</p>`;
            } finally {
                resultContainer.classList.remove('hidden');
            }
        }

        // Event Listeners
        if (checkStatusForm) {
            checkStatusForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                trackService();
            });
        }

        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const serviceCodeFromUrl = urlParams.get('code');

            if (serviceCodeFromUrl) {
                showPage('tracking-page');
                serviceCodeInput.value = serviceCodeFromUrl.toUpperCase();
                trackService(serviceCodeFromUrl.toUpperCase());
            } else {
                showPage('home-page');
            }

            // Memulai slider saat halaman dimuat
            if (slides.length > 1) {
                startSlider();
            }
        });
    </script>
</body>
</html>
